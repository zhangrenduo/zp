window.addEventListener("message",function(a){if(a.data==null||a.data==0||a.data=="undefined"){geo.getPositionError("fromIOS")}else{geo.getPositionSuccess(a.data)}});var geo={url:"#",getLocation:function(){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(this.getPositionSuccess,this.getPositionError)}else{geo.getIOSLocation()}},getIOSLocation:function(){if($("iframe").length==0){$("body").append("<iframe id='location_iframe' src='"+this.url+"' style='display:none;'></iframe>")}else{$("iframe").attr("src",this.url)}},getPositionSuccess:function(a){if($("#icon").attr("value")){geoPositionSuccess(a)}else{successCallback(a)}},getPositionError:function(a){if(a=="fromIOS"){errorCallback();return false}geo.getIOSLocation()}};